در هر سیستم عامل بخشی وجود دارد به نام اسکجلر - scheduler که مسئول زمانبندی اجرای دستورات روی پردازنده است

درون هر پردازنده واحدی وجود دارد به نام thread ک وظیفه اجرای همزمان چندین کار را بر عهده دارد
ترد مانند صفی است که کار ها درون انقرار میگرند

اسکجلر تسک های مختلف را درون ترد میگذارد و ترد به ترتیب تسک ها رو اجرا میکنه اما به هر تسک زمانی اختصاص میدهذ
و بعد از تمام شدن اون زمان به سراغ تسک بعدی میرود
چون سرعت این فرایند زیاد است بنظر میاید که همزمان صورت میگیرد

برای جا به جایی بین تسک ها ما درون ترد context switch را داریم که خودش هر بار مقداری زمان مصرف میکند

تسک ها دو گونه اند یا پردازش محور هستند و یا وابسته به I/O
اگر تسک هاوابسته به i/o باشد میتوانیم ترد ها رو زیاد تر کنیم
  ولی اگر وابسته به پردازش باشد بهتر است که از تعداد ترد های فیزیکی روی پردازنده بیشتر تسک درست نکنیم
  ( یعنی باریم هر ترد یک تسک داشته باشد )

از دید سیستم عامل فقط برنامه گولنگ اجرا میشود ولی خود گولنگ دارای اسمکجلر مختص خود است که از سیستم عامل سریع تر و بهینه تر است
بدین ترتیب میتوان داخل گولنگ ترد داشت

درا کثر اوقات برای پیدا کردن تعداد تسک ها مناسب برای بیشترین بازدهی زمانی نیاز به ازمون و خطا دارد
زیرا هر چه تعداد تسک بیشتر شود لزوما برنامه سریع تر نمیشود

ابزار های بنچمارک کمک میکند تا برنامه خود را بررسی کنیم تا بهترین حالت ان رو پیدا کنیم

تسک ها در زبان گولنگ به goroutine تعبیر میشوند
در اصل گروتین یک فانکشن یا متدی است که به صورت مستقل از روند برنامه و به صورت همزمان اجرا میشود

برای اجرای یک متد به صورت گروتین کافیست پشت فانکشت عبارت go را بنویسیم

کانکارنسی برای وقتی است که نیاز به ترتیب اجرا نداریم و برامون مهم نیست کدوم زودتر تموم میشه

وقتی دستوری رو به صورت گروتین اجرا میکنیم دیگر برنامه منتظر اجرای اون خط نمیمونه و سرا خط بعدی میره و اگه خط بعدی اخرین خط کد برنامه باشه
با تموم شدن اون خط عملا برنامه تموم میشه و با تموم شدن برنامه تمام گروتین ها هم بسته میشه

خود فانکشن main هم یک گروتین است

sync.WaitGroup
در حکم تنظیم کننه و ایجاد بلاکر برای اطمینان از اتمام گروتین ها است.
بدین صورت که اول با add میگیم منتظر تموم شدن چند کروتین هستیم؟ بعد در پایان هر گروتین یک done باید بزارم
در پایان هم چون وقتی گروتین رو دایرم در کد اجرا میکنیم به صورت non block میشه پس نیازه یه wait بزاریم تا صبر کنه
تعداد done هامون به اندازه کافی برسه

اگر تعداد done ها کمتر از عدد add باشه یا فراموش کنیم بزاریم ارور deadlock میگیریم که شایع است

 164